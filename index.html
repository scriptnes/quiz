<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta content="width=device-width,initial-scale=1,minimal-ui" name="viewport">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,400italic|Material+Icons">
    <link rel="stylesheet" href="https://unpkg.com/vue-material@beta/dist/vue-material.min.css">
    <link rel="stylesheet" href="https://unpkg.com/vue-material@beta/dist/theme/default.css">
    <title>Тест Демо</title>
    <script src="https://unpkg.com/vue"></script>
    <script src="https://unpkg.com/vue-material@beta"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>

<body>
    <!-- demo root element -->
    <div id="app">
        <h1>{{ quiz.title }}</h1>
        <!-- index is used to check with current question index -->
        <div v-for="(question, index) in quiz.questions">
            <!-- Hide all questions, show only the one with index === to current question index -->
            <div v-show="index === questionIndex">
                <h2>{{ question.text }}</h2>
                <ol>
                    <li v-for="response in question.responses">
                        <label>
                            <!-- The radio button has three new directives -->
                            <!-- v-bind:value sets "value" to "true" if the response is correct -->
                            <!-- v-bind:name sets "name" to question index to group answers by question -->
                            <!-- v-model creates binding with userResponses -->
                            <input type="radio" v-bind:value="response.correct" v-bind:name="index" v-model="userResponses[index]">
                            {{response.text}}
                        </label>
                    </li>
                </ol>
                <!-- The two navigation buttons -->
                <!-- Note: prev is hidden on first question -->
                <button v-if="questionIndex > 0" v-on:click="prev">
                    преди
                </button>
                <button v-on:click="next">
                    следващ
                </button>
            </div>
        </div>
        <div v-show="questionIndex === quiz.questions.length">
            <h2>
                Край на Теста!
            </h2>
            <p>
                Общо точки: {{ score() }} / {{ quiz.questions.length }}
            </p>
        </div>


    </div>

    <script>
        Vue.use(VueMaterial.default);

        // Create a quiz object with a title and two questions.
        // A question has one or more answer, and one or more is valid.
        var quiz = {
            title: 'Моя Тест',
            questions: [
                {
                    text: "Въпрос 1",
                    responses: [
                        { text: 'Wrong, too bad.' },
                        { text: 'Right!', correct: true },
                    ]
                }, {
                    text: "Въпрос 2",
                    responses: [
                        { text: 'Right answer', correct: true },
                        { text: 'Wrong answer' },
                    ]
                },
                {
                    text: "Въпрос 3",
                    responses: [
                        { text: 'Right answer', correct: true },
                        { text: 'Wrong answer' },
                    ]
                },
                {
                    text: "Въпрос 4",
                    responses: [
                        { text: 'Right answer', correct: true },
                        { text: 'Wrong answer' },
                    ]
                },
                {
                    text: "Въпрос 5",
                    responses: [
                        { text: 'Right answer', correct: true },
                        { text: 'Wrong answer' },
                    ]
                }
            ]
        };

        new Vue({
            el: '#app',
            data: {
                quiz: quiz,
                // Store current question index
                questionIndex: 0,
                // An array initialized with "false" values for each question
                // It means: "did the user answered correctly to the question n?" "no".
                userResponses: Array(quiz.questions.length).fill(false)
            },
            // The view will trigger these methods on click
            methods: {
                // Go to next question
                next: function () {
                    this.questionIndex++;
                },
                // Go to previous question
                prev: function () {
                    this.questionIndex--;
                },
                // Return "true" count in userResponses
                score: function () {
                    return this.userResponses.filter(function (val) { return val }).length;
                }
            }
        });
    </script>



    <style>

    </style>
</body>

</html>
